<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Welcome to PerkMiner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background: #f7f7fb; text-align: center; margin:0; }
    .header { width: 100%; background: #fff; padding: 30px 0 16px 0; box-shadow: 0 2px 8px #0001; }
    .header img { max-width: 260px; height: auto; }
    .videos-row {
      display: flex; flex-wrap: wrap; gap: 28px; justify-content: center; padding: 36px 0 8px 0;
    }
    .video-card {
      background: #fff; border-radius: 14px; box-shadow: 0 2px 12px #0002;
      padding: 24px 18px 36px 18px; max-width: 430px; flex: 1 1 380px; min-width: 320px;
      display: flex; flex-direction: column; align-items: center;
      margin-bottom: 0;
    }
    .video-title {
      font-size: 1.4em; font-weight: bold; margin-bottom: 16px; color: #23223f;
    }
    video { width: 100%; max-width: 390px; border-radius: 8px; margin-bottom: 20px;}
    
    /* Button styles */
    .join-btn {
      background: #6366f1; color: white;
      font-size: 1.12em; padding: 14px 42px;
      border: none; border-radius: 8px;
      cursor: pointer; font-weight: bold;
      text-decoration: none; display: inline-block;
      transition: background .15s, transform .1s;
      margin-top: 20px;
    }
    .join-btn:hover { background: #4f46e5; transform: translateY(-2px); }
    .join-btn.biz {
      background: #10b981; /* emerald green for business */
    }
    .join-btn.biz:hover { background: #059669; }

    @media (max-width: 900px) {
      .videos-row { flex-direction: column; align-items: center; padding-top:26px;}
      .video-card { margin-bottom: 40px; min-width: 80vw; }
    }
    @media (max-width: 600px) {
      .header img { max-width: 170px; }
      .join-btn { width: 100%; font-size:1.05em; padding: 13px 0; }
      .video-title { font-size: 1.08em; }
      .video-card { padding: 17px 7px 24px 7px; }
    }
  </style>
</head>
<body>
  <!-- HEADER WITH LOGO -->
  <div class="header">
    <img src="https://res.cloudinary.com/dmrntlcfd/image/upload/v1769980535/PerkMiner_Logo_o2qgfy.jpg" alt="PerkMiner Logo">
  </div>

  <!-- SIDE-BY-SIDE VIDEO WINDOWS -->
  <div class="videos-row">
    <!-- USER / MEMBER VIDEO CARD -->
    <div class="video-card">
      <div class="video-title">For Savvy Shoppers</div>
      <video
        id="user-video"
        controls controlsList="nodownload"
        oncontextmenu="return false;"
        preload="auto"
        poster="https://via.placeholder.com/800x450/6366f1/ffffff?text=Shopper+Intro">
        <source src="https://res.cloudinary.com/dmrntlcfd/video/upload/v1769913409/Perkminer_-_Cashback_pro_vlefos.mp4" type="video/mp4">
        Sorry, your browser doesn't support embedded videos.
      </video>

      <!-- Member Join Button -->
      <a id="member-join-btn" class="join-btn" href="/register">Join as a Member</a>
    </div>

    <!-- BUSINESS VIDEO CARD -->
    <div class="video-card">
      <div class="video-title">For Business Owners</div>
      <video
        id="biz-video"
        controls controlsList="nodownload"
        oncontextmenu="return false;"
        preload="auto"
        poster="https://via.placeholder.com/800x450/232323/ffffff?text=Business+Intro">
        <source src="https://res.cloudinary.com/dmrntlcfd/video/upload/v1769913409/Perkminer_-_Cashback_pro_vlefos.mp4" type="video/mp4">
        Sorry, your browser doesn't support embedded videos.
      </video>

      <!-- Business Join Button -->
      <a id="business-join-btn" class="join-btn biz" href="/business/register">Join as a Business</a>
    </div>
  </div>

  <script>
    // Handle referral parameters
    const urlParams = new URLSearchParams(window.location.search);
    const ref = urlParams.get('ref');    // member referral
    const biz = urlParams.get('biz');    // business referral

    // Member button: passes ?ref=...
    const memberBtn = document.getElementById('member-join-btn');
    let memberUrl = '/register';
    if (ref) {
      memberUrl += '?ref=' + encodeURIComponent(ref);
    }
    memberBtn.href = memberUrl;

    // Business button: passes ?biz=...
    const businessBtn = document.getElementById('business-join-btn');
    let businessUrl = '/business/register';
    if (biz) {
      businessUrl += '?biz=' + encodeURIComponent(biz);
    }
    businessBtn.href = businessUrl;

    // Video protection (right-click, save prevention)
    function protectVideo(id) {
      const video = document.getElementById(id);
      video.addEventListener('contextmenu', (e) => e.preventDefault());
      video.addEventListener('keydown', function(e){
        if ((e.ctrlKey && e.key === "s") || (e.key === "S" && e.metaKey)) {
          e.preventDefault();
        }
      });
      video.addEventListener('mouseover', function(){
        video.setAttribute('controlsList', 'nodownload');
      });
    }
    protectVideo('user-video');
    protectVideo('biz-video');
  </script>
</body>
</html>
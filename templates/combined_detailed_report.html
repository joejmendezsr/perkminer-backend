<!DOCTYPE html>
<html>
<head>
    <title>Combined Detailed Report - Finance Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-2 flex-wrap">
    <h3 class="mb-2">Combined Detailed Report</h3>
    <a href="{{ url_for('finance_dashboard') }}" class="btn btn-outline-primary mb-2">Return to Finance Dashboard</a>
  </div>
  <form class="row gy-2 gx-2 mb-3" id="filter-form" method="get">
    <div class="col-12 col-sm-3">
      <label class="form-label">Period:</label>
      <select class="form-select" name="period">
        <option value="all" {% if not period or period == 'all' %}selected{% endif %}>All</option>
        <option value="year" {% if period == 'year' %}selected{% endif %}>Annual</option>
        <option value="month" {% if period == 'month' %}selected{% endif %}>Monthly</option>
      </select>
    </div>
    <div class="col-12 col-sm-3">
      <label class="form-label">Year:</label>
      <input type="number" name="year" id="year" class="form-control" placeholder="YYYY" value="{{ year or '' }}">
    </div>
    <div class="col-12 col-sm-3">
      <label class="form-label">Month:</label>
      <input type="number" min="1" max="12" name="month" id="month" class="form-control" placeholder="1-12" value="{{ month or '' }}">
    </div>
    <div class="col-12 col-sm-3">
      <label class="form-label">Referral ID or Email:</label>
      <input type="text" name="referral_id" class="form-control mb-1" placeholder="Referral ID">
      <input type="text" name="email" class="form-control" placeholder="Email address">
    </div>
    <div class="col-12 mt-1">
      <button type="submit" class="btn btn-primary w-100"><i class="bi bi-search"></i> Search</button>
    </div>
  </form>
  <div class="mb-4">
    <b>Grand Total (All Transactions):</b> ${{ "{:,.2f}".format(grand_total) }}<br>
    <b>User Transactions Total:</b> ${{ "{:,.2f}".format(user_total) }}<br>
    <b>Business Transactions Total:</b> ${{ "{:,.2f}".format(business_total) }}
  </div>
  <!-- Render your detailed results tables or summaries below -->
  <!-- Add export and print buttons as needed -->
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
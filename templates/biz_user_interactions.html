<!DOCTYPE html>
<html>
<head>
    <title>User Service Requests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <style>
      #interaction-list {
        max-height: 415px;
        overflow-y: auto;
      }
      @media (max-width: 600px) {
        #interaction-list { max-height: 72vw; }
        .list-group-item, .btn, .btn-info, .btn-primary { font-size: 1.03em; padding: 0.95em 0.7em; }
        .me-2 { margin-right: 0.5rem !important; }
      }
      .btn-info, .btn-primary { min-width: 85px; }
      .list-group-item { flex-wrap: wrap; }
      .d-flex > div { min-width: 140px; }
    </style>
</head>
<body>
<div class="container py-4">
  <h3 class="mb-3 text-center text-md-start">User Service Requests</h3>
  <input type="text" id="searchInput" class="form-control mb-3" placeholder="Filter by user name...">
  <div id="interaction-list">
  {% if interactions %}
    <ul class="list-group">
      {% for i in interactions %}
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
          <div class="py-1">
            <strong>{{ i.user.name or i.user.email }}</strong><br>
            <small class="text-muted">{{ i.service_type }}</small>
          </div>
          <div class="py-1">
            <a href="{{ url_for('biz_interaction_details', interaction_id=i.id) }}" class="btn btn-info btn-sm me-2 mb-1">Details</a>
            <a href="{{ url_for('biz_active_session', interaction_id=i.id) }}" class="btn btn-primary btn-sm mb-1">Select</a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-info text-center mt-4">No active user requests yet.</div>
  {% endif %}
  </div>
</div>
<script>
document.getElementById('searchInput').addEventListener('keyup', function () {
    var filter = this.value.toLowerCase();
    document.querySelectorAll('#interaction-list li').forEach(function(item) {
        var name = item.textContent || item.innerText;
        item.style.display = name.toLowerCase().indexOf(filter) > -1 ? "" : "none";
    });
});
</script>
</body>
</html>
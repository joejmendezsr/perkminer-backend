<!DOCTYPE html>
<html>
<head>
    <title>Business Receipts - PerkMiner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container py-4">
  <h3 class="mb-3 text-center">Business Receipts</h3>
  {% if transactions %}
    <div class="table-responsive">
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>Date/Time</th>
            <th>Amount</th>
            <th>Ad Fee (10%)</th>
            <th>Net Gross</th>
            <th>Receipt</th>
          </tr>
        </thead>
        <tbody>
          {% for txn in transactions %}
          <tr>
            <td>{{ txn.date_time.strftime('%Y-%m-%d %I:%M %p') }}</td>
            <td>${{ "{:,.2f}".format(txn.amount) }}</td>
            {# You may need to add columns for ad_fee etc. depending on your summary logic #}
            <td>
              {% set ad_fee = "{:,.2f}".format(txn.amount * 0.10) %}
              ${{ ad_fee }}
            </td>
            <td>
              {% set net_gross = "{:,.2f}".format(txn.amount - (txn.amount * 0.10)) %}
              ${{ net_gross }}
            </td>
            <td>
              <a href="{{ url_for('finalize_transaction', interaction_id=txn.interaction_id) }}" class="btn btn-info btn-sm">View</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-info text-center">No receipts yet.</div>
  {% endif %}
  <a href="{{ url_for('business_dashboard') }}" class="btn btn-primary mt-3 w-100">Back to Dashboard</a>
</div>
</body>
</html>